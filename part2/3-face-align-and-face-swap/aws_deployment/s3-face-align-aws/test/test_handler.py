#import pytest
from handler import main_handler
from requests_toolbelt import MultipartEncoder
import json
import base64

faceImg = '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'


def test_handler(imdata):
    resp = main_handler({
        'headers': {'content-type': 'multipart/form-data; boundary=X-INSOMNIA-BOUNDARY'},
        'body': imdata
    }, '')
    resp_body = json.loads(resp['body'])
    print(resp['statusCode'])
    #assert resp_body['something'] == 208


if __name__ == '__main__':
    print("Running test..")
    test_handler(faceImg)